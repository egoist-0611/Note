### 概念理解

版本：

- 软件版本（如：IDEA 2022、IDEA 2023）
- 文件版本（如：test_v1.txt、test_v2.txt），用于保存重要的历史数据，以便在出现问题时进行数据恢复



软件配置管理（SCM）：通过执行版本控制、变更控制的规程，以及使用合适的配置管理软件，来保证所有配置项的完整性和可跟踪性



版本控制软件基础功能：

- 保存和管理文件
- 提供客户端工具来进行访问
- 提供不同版本文件间的比对功能



集中式版本控制：对唯一的中央服务器进行管理和操作

分布式版本控制：在本地部署另一个中央服务器，由本地中央服务器与互联网上的中央服务器进行数据同步



多人协作开发：多个人对中央服务器（资源库）进行管理和操作

开发流程：

- 用户通过客户端，对远程中央服务器中的资源进行下载到本地
- 在本地进行修改后，通过客户端上传到中央服务器上



文件冲突：若用户A、用户B同时下载了中央服务器中的资源，且用户A在修改后进行资源上传后，用户B再进行上传，就会导致用户B不是在用户A修改后的文件的基础上进行修改的



解决文件冲突：

- 用户A在下载后进行修改时，该资源会被锁定，期间，用户B只能对资源进行查看。当用户A提交资源后，该资源会被解锁，客户端会重新下载修改后的资源进行覆盖，而用户B就可以对该资源进行修改了（不可同时修改）
- 用户A、用户B在下载资源后，可以同时修改，但是约定了：用户A只修改XXX部分，用户B只修改XXX部分，当用户A和用户B对资源进行提交时，会将两者提交的文件进行融合。但是，若是两个用户不遵守约定，则依旧会导致文件冲突（可同时修改）







### 下载安装

Git官网：`git-scm.com`

GUI Clients：Git的操作客户端，下载GitHub Desktop即可

- Git的安装：在中间选择Notepad++进行代码编辑，其他一路next即可
- GitHub Desktop的安装：双击就会自动安装，无需其他操作







### GUI Clients使用

> 在首次使用时，需要先通过 File --> Options --> Git --> Name、Email中填写信息 --> Save

#### 本地仓库管理

File中，可以看到三个选项：

1. New repository：创建一个新的本地仓库
2. Add local repository：选择本地仓库路径
3. Clone repository：从互联网上克隆一个仓库到本地中



加载本地仓库后：

- Current repository：可以查看以及切换当前GUI Clients中的本地仓库
  - 可直接拖拽本地仓库到GUI Clients中，即可在GUI Clients中加载该本地仓库
  - 右键仓库名 --> Remove --> Remove，可在GUI Clients中移除该仓库，Also move this repository to Recycle Bin，可将该仓库从系统中移除至回收站
- Show in Explorer：查看当前本地仓库在系统中的位置





#### 文件操作

- 在按下Show in Explorer后，会打开本地仓库存放路径
- 但是，该路径只是文件操作的空间，其内的文件并不会被上传到本地中央仓库
- 在GUI Clients中，按下Commit to main后，才会将该文件上传到本地中央仓库
- 本地中央仓库，实质上是在该路径下的隐藏目录：.git，而提交的文件，则被存放在 .git/objects 目录中



在文件操作空间中修改了文件后，会与本地中央仓库中的文件进行比对：

- 在Changes中，可以看到与本地中央仓库的文件内容不同的文件，以及有差别的内容
  - -代表原先的行数，+代表现在的行数，绿色行是新增的，红色行是被修改的
  - 有些文件的内容被修改后，是无法通过比对功能看出来的
  - 右键可选择忽略该文件或该类型的文件（ignore），被忽略的文件或文件类型不会参与对比
- 在History中，可以看到每次修改的人、修改的内容以及对应的40位十六进制的版本号（提交码）
- 若是要移除该文件，需要将文件操作空间中的文件删除，并Commit to main到本地中央仓库中。中央仓库依旧是与文件操作空间中的文件进行比对，然后进行同步（文件删除）







#### 分支操作

> 若没有分支功能，当用户A和用户B都时不时往仓库中提交数据时，版本控制等方面就会显得比较混乱；且还可能会频繁出现文件冲突问题

Current branch：创建和管理分支

- New branch：创建新的分支
- 右键分支名，可以重命名或删除分支



创建了不同的分支，就相当于创建了本地仓库的副本，且不同分支有着不同的文件操作空间。

将不同分支下的文件操作空间中的内容进行提交时，只是存放到该分支所对应的本地仓库副本中。

由分支进行统一管理后，最后再汇总到主分支：

- 在 Current branch --> 切换到主分支 --> Choose a branch to merge into --> 选择要合并进来的分支 --> Create a merge commit（在没有文件冲突或有内容变化时，即可合并到主分支）
- 在合并分支时，若出现文件冲突，则在提交时会展示冲突文件。只有在解决文件冲突后才能合并分支



合并分支时，是自动完成的操作，在此过程中我们不能添加一些描述信息来修饰该操作。因此，可以借用标签：

- 在 History --> 选择要添加标签的记录 --> 右键 --> Create tag --> 添加备注信息（标签名）
- 也可以右键删除备注信息





#### 关联远程仓库

首先登录GitHub账号：File --> Options --> Accounts 中登录GitHub.com 账号

File --> Clone respository 克隆远程仓库到本地

提交前，需要先修改提交的用户的邮箱：File --> Options --> Git 中的用户信息（邮箱）

点击 Push origin 将仓库推送到远程仓库中









### IDEA中使用Git

1. VCS --> Share Project On GitHub（将项目提交到GitHub中）--> Repository name（指定仓库名）--> Add account（登录GitHub账户）

   > Settings --> Version Control --> GitHub 中可选择退出账号

2. Git选项中包含了大多数功能：

   - Commit：提交文件（存放到本地仓库中）
   - Push：推送到远程仓库
   - Pull：重新拉取远程仓库中的文件
   - Clone：将远程仓库克隆到本地

